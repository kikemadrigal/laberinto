1000 '  �   ��  �  �   ���  �
1010 ' � � �   � � �    �  � �
1020 ' � � �   � � �    �  � �
1030 ' � �  �  � � �    �  � �
1040 ' � �   � � � �    �  � �
1050 ' ���   � ��� �    �  � �
1060 ' � � ��  � � ���  �   �
1070 SCREEN 1,0:WIDTH 31:COLOR 1,7,1:CLS:KEY OFF
1080 ON STOP GOSUB 3120:STOP ON
1 ' Leemos los data y cambiamos los sprites 224 y 225'
1090 GOSUB 2870
1100 A$=CHR$(225)+CHR$(224)+CHR$(225)+CHR$(224)
1110 LOCATE 7,4:PRINT CHR$(224)+A$;SPC(6);A$+CHR$(225)
1120 A$=CHR$(211)+CHR$(213)+CHR$(211)+CHR$(213)
1130 LOCATE 7,5:PRINT CHR$(213)+A$+"ASALTO"+A$+CHR$(211)
1140 A$=CHR$(233)+STRING$(14,232)+CHR$(234)
1150 FOR I=6 TO 10:LOCATE 7,I:PRINT A$:NEXT I
1160 LOCATE 8,12:PRINT "POR J. VICEIRA"
1170 FOR I=1 TO 500
1180 LOCATE 5,15:PRINT "Tienes dos opciones:"
1190 LOCATE 3,17:PRINT "1.- Defender la fortaleza"
1200 LOCATE 3,19:PRINT "2.- Asaltar la fortaleza"
1210 LOCATE 7,21:PRINT "�Cu�l prefieres?"
1220 C$=INKEY$
1230 IF C$="" THEN 1220
1240 IF ASC(C$)<49 OR ASC(C$)>50 THEN 1220
1250 C=VAL(C$)
1 ' si pulsas 1 va a subrutina 2660'
1260 ON C GOSUB 1270,2010
1270 GOSUB 2660
1280 LOCATE 4,15:PRINT "Defiende la fortaleza"
1290 LOCATE 4,16:PRINT "del ataque de una masa"
1300 LOCATE 5,17:PRINT "de endemoniados. Usa"
1310 LOCATE 2,18:PRINT "el cursor y el espaciador."
1320 FOR I=1 TO 1000:NEXT I
1330 LOCATE 9,20:PRINT "��ADELANTE!!"
1340 FOR I=1 TO 300:NEXT I
1350 I=RND(-TIME)
1360 DIM X%(12),Y%(12),S%(12)
1370 V%=5:SC%=0:L%=1
1380 M%=120:N%=40
1390 CLS:GOSUB 2740
1400 FOR I=1 TO 12
1410 X%(I)=I*16+16
1420 S%(I)=RND(1)*2
1430 Y%(I)=160
1440 NEXT I
1450 ON STRIG GOSUB 1530
1460 ON SPRITE GOSUB 1750
1470 FOR I=1 TO 12
1480 PUT SPRITE I,(X%(I),Y%(I)),15,S%(I)
1490 NEXT I
1500 SPRITE ON:STRIG(0) ON
1510 GOSUB 1590
1520 GOTO 1510
1530 STRIG(0) OFF
1540 FOR B%=48 TO 160 STEP 8
1550 PUT SPRITE 0,(Z%,B%),5,4
1560 GOSUB 1610 
1570 NEXT B%
1580 STRIG(0) ON:RETURN
1590 Z%=M%
1600 PUT SPRITE 0,(Z%,N%-8),5,4
1610 PUT SPRITE 15,(M%,N%),1,2
1620 FOR I=1 TO L%
1630 W%=RND(1)*12+1
1640 Y%(W%)=Y%(W%)-4:S%(W%)=-S%(W%)+1
1650 PUT SPRITE W%,(X%(W%),Y%(W%)),15,S%(W%)
1660 IF Y%(W%)<42 THEN GOSUB 1860
1670 NEXT I
1680 ST%=STICK(0)
1690 ON ST% GOTO 1700,1700,1710,1700,1700,1700,1730
1700 RETURN
1710 IF M%>=216 THEN RETURN
1720 M%=M%+4:RETURN
1730 IF M%<=24 THEN RETURN
1740 M%=M%-4:RETURN
1750 SPRITE OFF:BEEP
1760 FOR Q%=1 TO 12
1770 IF X%(Q%)<Z%+6 AND X%(Q%)>Z%-6 THEN 1790
1780 NEXT Q%:RETURN
1790 Y%(Q%)=160
1800 PUT SPRITE Q%,(X%(Q%),160),15,S%(Q%)
1810 Q%=12:NEXT Q%:B%=160
1820 SC%=SC%+10
1830 LOCATE 9,1:PRINT USING"####";SC%
1840 IF SC%>=L%*500 THEN L%=L%+1:V%=V%+1:RETURN 1380
1850 SPRITE ON:STRIG(0) ON:RETURN
1860 STRIG(0) OFF:SPRITE OFF
1870 I=L%
1880 FOR I=1 TO 15
1890 S%(W%)=-S%(W%)+1
1900 PUT SPRITE W%,(X%(W%),40),I,S%(W%)
1910 FOR J=1 TO 50:NEXT J
1920 NEXT I
1930 PUT SPRITE W%,(X%(W%),40),15,3
1940 FOR J=1 TO 500:NEXT J
1950 V%=V%-1
1960 IF V%>0 THEN RETURN 1380
1970 LOCATE 28,1:PRINT "0"
1980 LOCATE 9,21:PRINT "JUEGO ACABADO"
1990 FOR I=1 TO 1500:NEXT I
2000 CLS:RUN
2010 GOSUB 2660
2020 LOCATE 3,15:PRINT "Penetra en la fortaleza"
2030 LOCATE 3,16:PRINT "escalando  sus murallas."
2040 LOCATE 8,17:PRINT "Usa el cursor"
2050 FOR I=1 TO 1000:NEXT
2060 LOCATE 9,20:PRINT "��ADELANTE!!"
2070 FOR I=1 TO 300:NEXT
2080 V%=5:I=RND(-TIME)
2090 L%=1:Q%=60
2100 M%=120:N%=40:T%=Q%
2110 X%=120:Y%=160:S%=RND(1)*2
2120 CLS:GOSUB 2740
2130 ON SPRITE GOSUB 2490:SPRITE ON
2140 ON INTERVAL=50 GOSUB 2400:INTERVAL ON
2150 PUT SPRITE 0,(M%,N%-8),5,4
2160 PUT SPRITE 2,(M%,N%),1,2
2170 IF M%=X% THEN GOSUB 2220
2180 IF M%>X% THEN M%=M%-L%
2190 IF M%<X% THEN M%=M%+L%
2200 GOSUB 2270
2210 GOTO 2150
2220 FOR B%=48 TO 160 STEP 2
2230 PUT SPRITE 0,(M%,B%),5,4
2240 GOSUB 2270
2250 NEXT B%
2260 RETURN
2270 ST%=STICK(0)
2280 ON ST% GOTO 2310,2300,2340,2300,2360,2300,2380
2290 PUT SPRITE 1,(X%,Y%),15,S%
2300 RETURN
2310 Y%=Y%-1:S%=-S%+1
2320 IF Y%<42 THEN GOSUB 2550
2330 GOTO 2290
2340 IF X%>=216 THEN RETURN
2350 X%=X%+1:GOTO 2290
2360 IF Y%>=160 THEN RETURN
2370 Y%=Y%+1:S%=-S%+1:GOTO 2290
2380 IF X%<=24 THEN RETURN
2390 X%=X%-1:GOTO 2290
2400 T%=T%-1
2410 LOCATE 9,1:PRINT USING "###";T%
2420 IF T%<=0 THEN 2440
2430 RETURN
2440 INTERVAL OFF
2450 LOCATE 8,3:PRINT"FUERA DE TIEMPO"
2460 FOR I=1 TO 1000:NEXT I
2470 V%=V%-1
2480 IF V%>0 THEN RETURN 2100 ELSE 1970
2490 SPRITE OFF:INTERVAL OFF
2500 FOR B%=Y%+4 TO 160
2510 PUT SPRITE 1,(X%,B%),15,2
2520 PUT SPRITE 0,(M%,B%-10),5,4
2530 NEXT B%
2540 GOTO 2460
2550 INTERVAL OFF:SPRITE OFF
2560 FOR I=1 TO 15
2570 S%=-S%+1
2580 PUT SPRITE 1,(X%,40),I,S%
2590 FOR J=1 TO 50:NEXT J
2600 NEXT I
2610 V%=V%+1
2620 IF L%<4 THEN L%=L%+1
2630 IF Q%>40 THEN Q%=Q%-10
2640 FOR I=1 TO 1000:NEXT I
2650 RETURN 2100
2660 LOCATE 13,1:PRINT "XWY"
1 ' subrutina'
    2670 LOCATE 13,2:PRINT "V";RIGHT$(STR$(C),1);"V"
    2680 LOCATE 13,3:PRINT "ZW["
    2690 FOR I=15 TO 21 STEP 2
    2700 FOR J=3 TO 27
    2710 LOCATE J,I:PRINT CHR$(32)
    2720 NEXT J,I
2730 RETURN
2740 LOCATE 2,1
2750 IF C=1 THEN PRINT USING "PUNTOS ####";SC%
2760 IF C=2 THEN PRINT USING "TIEMPO ###";T%
2770 LOCATE 22,1:PRINT USING "VIDAS #";V%
2780 A$=CHR$(224)
2790 FOR I=1 TO 13:A$=A$+CHR$(225)+CHR$(224):NEXT I
2800 LOCATE 2,4:PRINT A$
2810 A$=CHR$(213)
2820 FOR I=1 TO 13:A$=A$+CHR$(211)+CHR$(213):NEXT I
2830 LOCATE 2,5:PRINT A$
2840 A$=CHR$(233)+STRING$(25,232)+CHR$(234)
2850 FOR I=6 TO 20:LOCATE 2,I:PRINT A$:NEXT I
2860 RETURN
1 ' Rutina llamada en el inicio'
    2870 RESTORE
    2880 FOR I=0 TO 4:SP$=""
        2890 FOR J=1 TO 8:READ A$
            2900 SP$=SP$+CHR$(VAL("&H"+A$))
        2901 NEXT J
        2910 SPRITE$(I)=SP$
    2911 NEXT I
    2920 FOR I=1792 TO 1807
        2921 READ A$
        2930 VPOKE I,VAL("&H"+A$)
    2931 NEXT I
    2940 FOR I=1856 TO 1879
        2941 READ A$
        2950 VPOKE I,VAL("&H"+A$)
    2951 NEXT I
    2960 VPOKE 8218,&H76
    2970 VPOKE 8220,&H67
    2980 VPOKE 8221,&H6A
2990 RETURN
3000 DATA 58,58,24,1a,1a,24,24,66
3010 DATA 1a,1a,24,58,58,24,24,66
3020 DATA 5a,5a,24,18,18,24,24,66
3030 DATA 18,18,24,5a,5a,24,24,66
3040 DATA 00,00,00,38,7e,ff,ff,7e
3050 REM
3060 DATA 00,00,00,c0,e0,f0,f8,fc
3070 DATA 00,00,00,03,07,0f,1f,3f
3080 REM
3090 DATA 01,01,01,ff,10,10,10,ff
3100 DATA 81,81,81,ff,90,90,90,ff
3110 DATA 01,01,01,ff,11,11,11,ff
3120 SCREEN 0:CLS:LIST 1000-1060:END
